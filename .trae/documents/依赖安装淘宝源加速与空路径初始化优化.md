## 目标

- 依赖安装时提示可使用淘宝源加速，默认同意；若同意则在安装命令追加 `--registry https://registry.npmmirror.com/`（npm/pnpm/部分支持），并确保 yarn/bun 通过 `.npmrc` 生效。
- 检测当前工作路径是否为空；若为空，提示“在当前路径初始化工程”或“新建目录”；选择当前路径时直接在该文件夹生成项目，避免多一层目录。

## 代码改动

### 增加交互项

- 在 `lib/cli.ts:79-120` 的 `promptConfig` 中新增：
  - 当 `installDeps` 为 `true` 时，追加 `useTaobaoRegistry:boolean` 的确认问题，文案“使用淘宝源加速依赖下载？（默认 是）”。

### 安装流程追加 registry 参数

- 在 `lib/cli.ts:141-146` 的依赖安装处，根据 `config.useTaobaoRegistry` 与包管理器决定安装命令：
  - `npm`/`pnpm`：将 `${pm} install` 改为 `${pm} install --registry https://registry.npmmirror.com/`。
  - `yarn`/`bun`：不追加参数，使用 `.npmrc` 控制（模板已包含 `template/.npmrc.template:1`）。
- 若用户选择“不使用加速”，在复制模板后删除生成的 `.npmrc`（避免强制镜像）：
  - 位置：`lib/cli.ts:134-146` 复制完模板后，条件性执行 `fs.remove(path.join(targetDir, '.npmrc'))`。

### 检测空路径并支持当前路径初始化

- 在 `lib/utils.ts` 增加 `isDirectoryEmpty(dirPath: string): Promise<boolean>`，使用 `fs.readdir` 判断目录内容数量。
- 在 `lib/cli.ts:28-77` 的 `run` 流程中：
  - 开始时检测 `process.cwd()` 是否为空；为空则询问 `useCurrentDir`（默认 是）。
  - 若 `useCurrentDir === true`：
    - 将 `targetDir` 设为 `process.cwd()`；
    - 跳过现有的“目录覆盖”确认（`lib/cli.ts:56-70`），因为当前目录为空；
  - 若 `useCurrentDir === false`：保持原逻辑，使用 `projectName` 生成 `targetDir` 并进行覆盖确认。
  - 仍保留项目名的询问与校验（`validateProjectName`，`lib/utils.ts:7-21`），项目名用于 `package.json`，不强制与目录名一致。

## 兼容与注意

- 默认值：`useTaobaoRegistry=true`，`useCurrentDir=true（仅在空目录时出现该询问）`。
- yarn/bun 的镜像设置通过 `.npmrc` 生效，避免使用不支持的 CLI 参数；若用户拒绝镜像，删除 `.npmrc` 以遵循选择。
- 保持现有输出与流程（如 `showCompletionMessage`，`lib/cli.ts:161-175`）。

## 验证

- 添加或更新测试覆盖场景：
  - 选择不同包管理器时安装命令的组装（含 registry 追加）。
  - 空目录场景下选择当前路径与新目录两种分支（确保不会多一层目录）。
- 人工验证：在空目录与非空目录下分别运行入口 `bin/create-astro-exe.ts`，确认交互与安装命令行为。
